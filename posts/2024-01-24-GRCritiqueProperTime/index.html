<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="JHM">
<meta name="dcterms.date" content="2024-01-24">
<meta name="description" content="Sequel to our post on What is Time? Here we briefly discuss proper time as defined in special relativity. We argue that proper time (tau) evidently does not have units of time as typically understood, since Lorentz lengths ds' (defined as squareroot of difference of squared lengths) do not have units equal to the units of Riemannian length (defined as squareroot of sum of squared lengths). This might seem pedantic at first glance, but it’s absolutely necessary to observe. The Riemannian length is the Pythagorean sum of squares, and there are always right angled triangles to construct and represent all the Riemannian lengths. But the Lorentz length is actually anti- Pythagoras, and looks to misrepresent differences of squares as if they were sums of squares. This leads to reverse triangle inequalities, which by definition are anti-Riemannian. The point is we prefer Classical Physics 2.0 where time is defined after Mach as matter in motion, and we avoid the Lorentz formalism.">

<title>jhm - What is Proper Time in Special Relativity?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../im1.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">jhm</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jhmartel/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/_jhmlabs" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">What is Proper Time in Special Relativity?</h1>
                  <div>
        <div class="description">
          Sequel to our post on <em>What is Time?</em> Here we briefly discuss <em>proper time</em> as defined in special relativity. We argue that proper time (tau) evidently does not have units of <em>time</em> as typically understood, since Lorentz lengths <span class="math inline">\(ds'\)</span> (defined as squareroot of difference of squared lengths) do <em>not</em> have units equal to the units of Riemannian length (defined as squareroot of sum of squared lengths). This might seem pedantic at first glance, but it’s absolutely necessary to observe. The Riemannian length is the Pythagorean sum of squares, and there are always right angled triangles to construct and represent all the Riemannian lengths. But the Lorentz length is actually <em>anti</em>- Pythagoras, and looks to misrepresent differences of squares <em>as if</em> they were sums of squares. This leads to reverse triangle inequalities, which by definition are <em>anti</em>-Riemannian. The point is we prefer Classical Physics 2.0 where time is defined after Mach as <em>matter in motion</em>, and we avoid the Lorentz formalism.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">einstein</div>
                <div class="quarto-category">time</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>JHM </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 24, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="what-are-the-units-of-proper-time-dtau-in-special-relativity" class="level2">
<h2 class="anchored" data-anchor-id="what-are-the-units-of-proper-time-dtau-in-special-relativity">“What are the Units of Proper Time <span class="math inline">\(d\tau\)</span> in Special Relativity?”</h2>
<p>This post discusses <a href="https://en.wikipedia.org/wiki/Proper_time">“proper time”</a> as defined by the special relativity theorists. Briefly we are <em>not</em> persuaded that this quantity denoted <span class="math inline">\(d\tau\)</span> represents a measure of “time” at all. The definition of proper time is a Lorentzian idea which involves a difference of squares. But the strict Riemannian geometer must understand that “differences of squares” do not represent “sums of squares”. Indeed how does a Riemannian geometer talk about “distances which satisfy reverse triangle inequalities” with a straight face? This implies that the Lorentzian “proper time” is not a measure of “time” at all, but a heterogeneous quantity relating Lorentz to Riemannian lengths. This is cause of much confusion in the literature.</p>
<p>It’s typically said that proper time is the “self time” as measured by an observer’s clock in the observer’s inertial reference frame. And this is a strange expression. We have discussed elsewhere <a href="https://jhmartel.github.io/posts/2024-01-19-WhatIsTime/">“What is Time?”</a> that “time is matter in motion” <em>ex definitio</em>. Therefore a “self time” is <em>any</em> periodic motion with a counter (wrist watch, pendulum, dog wagging it’s tail, comet appearing and disappearing, sun rising and setting). There is no assumption of uniformity in the motion, although for practical purposes this is useful. But special relativity deliberately undermines the possibility of “objective uniformity”. Clocks and measuring sticks are flexible and wobbly in the SR worldview (which view we do not share).</p>
</section>
<section id="lorentz-lengths-versus-riemannian-lengths" class="level2">
<h2 class="anchored" data-anchor-id="lorentz-lengths-versus-riemannian-lengths">Lorentz Lengths versus Riemannian Lengths</h2>
<p>Consider the Lorentz Minkowski line element <span class="math display">\[g=ds^2=-c^2dt^2+dx^2+dy^2+dz^2.\]</span> In <a href="https://github.com/jhmartel/SR/">our critical analysis</a> of special relativity we have warned readers from naively applying Riemannian ideas to Lorentzian metrics. We repeat: Lorentzian metrics are not Riemannian! When a Riemannian geometer starts working with Lorentz metrics, they typically begin with the line element <span class="math inline">\(ds':=\sqrt{-ds^2}\)</span> on timelike curves <span class="math inline">\(\gamma\)</span> where <span class="math inline">\(ds&lt;0\)</span>. By habit they refer to integrals <span class="math inline">\(\int_\gamma ds'\)</span> as “lengths” along the curves <span class="math inline">\(\gamma\)</span>. And they <em>assume</em> that this Lorentz length describes a Riemannian length. But this interpretation is misleading since Lorentz “lengths” satisfy the reverse triangle inequality, and thus “Lorentz lengths” are antithetical to “Riemannian length” This is trivial observation and repeatedly overlooked. Again we insist the measures represented by “Lorentz length” expressions <span class="math inline">\(\int_\gamma ds'\)</span> are not “lengths” as understood by Riemannian geometry. Countless errors are introduced by confusing these two definitions.</p>
<p>Related to the Lorentz metric is the so-called “proper time” function on timelike curves, usually represented by a definition type formula <span class="math inline">\(ds'=c d\tau\)</span>. But we find this “definition” insufficient and not strictly defining a “proper time”. Why? Because <span class="math inline">\(d\tau\)</span> does not have units of <em>time</em>. This is directly related to the error of interpreting <span class="math inline">\(ds'\)</span> as a measure of “Riemannian length”. In otherwords, <span class="math inline">\(d\tau\)</span> formally represents a ratio of “Lorentz length” over “Riemannian length” multiplied by “time”, i.e.&nbsp;<span class="math display">\[[d\tau] = \frac{[\text{Lorentz length}]}{[\text{Riemannian length}]} [\text{time}].\]</span></p>
</section>
<section id="sums-of-squares-versus-differences-of-squares-pythagoras-and-anti-pythagoras" class="level2">
<h2 class="anchored" data-anchor-id="sums-of-squares-versus-differences-of-squares-pythagoras-and-anti-pythagoras">Sums of Squares versus Differences of Squares: Pythagoras and Anti-Pythagoras</h2>
<p>As strange as it first sounds, we believe it’s a significant mistake to believe <span class="math inline">\(d\tau\)</span> has physical units of <em>time</em>. The fundamental problem is again that <span class="math inline">\(ds'\)</span> is emphatically <em>not</em> a measure of metric distance. Indeed the Pythagorean theorem involves sum of squares and and is inherently Riemannian. But Lorentz lengths are represented by differences of squares, and there is no “Pythagoras” in this setting. In euclidean geometry, the squareroot of a sum of orthogonal squares represents a length because of Pythagorean identity. There are right angled triangles to be constructed whose hypotenuses are the lengths in question. However the squareroot of a sum of <em>signed squares</em> is not readily identified as a length to the Pythagorean, even if one assumes the squares are orthogonal. There are no right angled triangles to draw except on the null cone <span class="math inline">\(ds^2=0\)</span> where the Pythagorean <span class="math display">\[c^2 dt^2=dx^2+dy^2+dz^2\]</span> is equivalently the hypothesis on the velocity of <span class="math inline">\(c\)</span> in vacuum. But on the null cone the proper time <span class="math inline">\(d\tau\)</span> is identically zero.</p>
</section>
<section id="brief-remark-on-diagonalized-rest-frames" class="level2">
<h2 class="anchored" data-anchor-id="brief-remark-on-diagonalized-rest-frames">Brief Remark on Diagonalized Rest Frames</h2>
<p><span class="math inline">\(\newcommand{\del}{\partial}\)</span></p>
<p>Here we include a frequent argument in the general relativity, alleging to establish the identity <span class="math inline">\(ds'=c d\tau\)</span> where <span class="math inline">\(d\tau\)</span> represents the so-called “proper time” of an inertial observer as measured by their local “clock”. This interpretation comes from the use of a so-called “instantaneous rest frame”. This requires the observer to find coordinates <span class="math inline">\((\tau, \xi, \eta, \zeta)\)</span> where <span class="math inline">\(\tau\)</span> represents “time” and all the partial derivatives vanish: <span class="math display">\[\frac{\del \xi}{\del \tau}=\frac{\del \eta}{\del \tau}=\frac{\del \zeta}{\del \tau}=0.\]</span> In this particular coordinate system one finds <span class="math inline">\(ds^2=-c^2d\tau^2\)</span> and <span class="math inline">\(ds'=\sqrt{-ds^2}=c d\tau\)</span>.</p>
<p>But can we really conclude that <span class="math inline">\(ds'\)</span> has units of <span class="math inline">\([length]\)</span> as a general rule, or equivalently that <span class="math inline">\(ds'/c\)</span> has units of <span class="math inline">\([time]\)</span>, based on a computation in one coordinate system? We observe that the system of equations is <em>not</em> tensorial since the partial derivatives <span class="math inline">\(\del \xi/ \del \tau\)</span> are <em>not</em> covariant. However the vanishing of the covariant derivatives <em>is</em> an invariant quantity, i.e.&nbsp;invariant with respect to change of variable rather than covariant (contravariant) with respect to change of variables. Replacing the partial derivatives with covariant derivatives, the vanishing no longer implies the coordinates <span class="math inline">\(\tau, \xi, \eta, \zeta\)</span> can be integrated into the “diagonal” form for <span class="math inline">\(g\)</span>. Therefore we are not really persuaded by this argument’s identification of “proper time”, and nonetheless the derivation still has the inherent problem of not representing “proper time” in units of “time”.</p>
</section>
<section id="carets-and-non-tensors" class="level2">
<h2 class="anchored" data-anchor-id="carets-and-non-tensors">Carets and Non Tensors</h2>
<p>The “mere coordinate singularities”, so named by Misner-Thorne-Wheeler in their influential textbook on “Gravitation” leads to their introduction of “geometrodynamics” and “carets” in the GR. An introduction to these ideas are discussed in <span class="citation" data-cites="klauber">(<a href="#ref-klauber" role="doc-biblioref">Klauber 2001</a>)</span> and briefly in <span class="citation" data-cites="thorne2000gravitation">(<a href="#ref-thorne2000gravitation" role="doc-biblioref">Thorne, Wheeler, and Misner 2000</a>)</span>. The caret argument says: although the components of tensors are noninvariant, the projections of these tensors onto coordinate components in a “local Lorentz frame” <em>are</em> well defined, observable and measurable. Thus carets are the coordinates of tensors in the so-called local Lorentz frame.</p>
<p>This idea of taking projections in a local Lorentz frame is curious, and though perhaps intuitively appealing, the mathematics is not clear. For fixed spatial coordinates <span class="math inline">\(\hat{x},\hat{y},\hat{z}\)</span> we know from Riemannian geometry how to construct the projections of an arbitrary vector <span class="math inline">\(v\)</span> onto the basis vectors, i.e.&nbsp;<span class="math inline">\(\hat{x}\cdot v\)</span>. But there is no projection onto the time variable, i.e.&nbsp;<span class="math inline">\(t\)</span> and <span class="math inline">\(\hat{t}\)</span> has no meaning. There really is no objective length or magnitude or “unit” of time.</p>
<p>In practice MTW <span class="citation" data-cites="thorne2000gravitation">(<a href="#ref-thorne2000gravitation" role="doc-biblioref">Thorne, Wheeler, and Misner 2000</a>)</span> take projections by dividing and renormalizing “component wise” in the tensors, but we claim this is ad hoc procedure and only convenient when the metric is diagonal. The same argument is encountered in <span class="citation" data-cites="klauber">(<a href="#ref-klauber" role="doc-biblioref">Klauber 2001</a>)</span>. Most mathematicians/physicists are not persuaded by these critiques. The projection onto coordinates axes seems to be inspired by projections in quantum mechanics. In the Born-Dirac Copenhagen interpretation, the projections amount to “observations”. The carets of MTW attempt to develop a parallel idea in GR.</p>
<p>Many will disagree here, but it depends on “Who taught you GR and how were you taught?” There appears to be no large-scale consensus anyway, and we welcome comments to the contrary.</p>
<p>[-JHM]</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-klauber" class="csl-entry" role="listitem">
Klauber, Robert D. 2001. <span>“Physical Components, Coordinate Components, and the Speed of Light.”</span> arXiv. <a href="https://doi.org/10.48550/ARXIV.GR-QC/0105071">https://doi.org/10.48550/ARXIV.GR-QC/0105071</a>.
</div>
<div id="ref-thorne2000gravitation" class="csl-entry" role="listitem">
Thorne, Kip S, John Archibald Wheeler, and Charles W Misner. 2000. <em>Gravitation</em>. Freeman San Francisco, CA.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>